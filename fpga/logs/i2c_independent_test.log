=====================================
  I2C Slave Testbench
=====================================

--- Test 0: Check reg_addr retrieval ---
[23950000] i2c_write_byte: data=0xa0, sda_bus=1, ack=0
  ERROR: No ACK on slave addr
[46450000] i2c_write_byte: data=0x00, sda_bus=1, ack=0
  ERROR: No ACK on reg addr
[47700000] reg_addr at GET_REG phase: 0x00
  PASS: reg_addr correctly captured BEFORE DEVICE_ID read

--- Test 1: Read DEVICE_ID ---
[75825000] i2c_write_byte: data=0xa0, sda_bus=1, ack=0
    ERROR: No ACK on address
[98325000] i2c_write_byte: data=0x00, sda_bus=1, ack=0
    ERROR: No ACK on reg address
[123325000] i2c_write_byte: data=0xa1, sda_bus=1, ack=0
    ERROR: No ACK on read address
[125825000] i2c_read_byte: bit[7]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[128325000] i2c_read_byte: bit[6]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[130825000] i2c_read_byte: bit[5]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[133325000] i2c_read_byte: bit[4]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[135825000] i2c_read_byte: bit[3]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[138325000] i2c_read_byte: bit[2]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[140825000] i2c_read_byte: bit[1]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[143325000] i2c_read_byte: bit[0]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[151450000] I2C Read: Reg[0x00] = 0xff
  FAIL: DEVICE_ID = 0xff (expected 0xa7)

--- Test 2: Read VERSION ---
[175200000] i2c_write_byte: data=0xa0, sda_bus=1, ack=0
    ERROR: No ACK on address
[197700000] i2c_write_byte: data=0x01, sda_bus=1, ack=0
    ERROR: No ACK on reg address
[222700000] i2c_write_byte: data=0xa1, sda_bus=1, ack=0
    ERROR: No ACK on read address
[225200000] i2c_read_byte: bit[7]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[227700000] i2c_read_byte: bit[6]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[230200000] i2c_read_byte: bit[5]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[232700000] i2c_read_byte: bit[4]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[235200000] i2c_read_byte: bit[3]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[237700000] i2c_read_byte: bit[2]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[240200000] i2c_read_byte: bit[1]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[242700000] i2c_read_byte: bit[0]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[250825000] I2C Read: Reg[0x01] = 0xff
  FAIL: VERSION_MAJ = 0xff (expected 0x01)
[274575000] i2c_write_byte: data=0xa0, sda_bus=1, ack=0
    ERROR: No ACK on address
[297075000] i2c_write_byte: data=0x02, sda_bus=1, ack=0
    ERROR: No ACK on reg address
[322075000] i2c_write_byte: data=0xa1, sda_bus=1, ack=0
    ERROR: No ACK on read address
[324575000] i2c_read_byte: bit[7]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[327075000] i2c_read_byte: bit[6]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[329575000] i2c_read_byte: bit[5]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[332075000] i2c_read_byte: bit[4]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[334575000] i2c_read_byte: bit[3]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[337075000] i2c_read_byte: bit[2]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[339575000] i2c_read_byte: bit[1]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[342075000] i2c_read_byte: bit[0]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[350200000] I2C Read: Reg[0x02] = 0xff
  FAIL: VERSION_MIN = 0xff (expected 0x00)

--- Test 3: SCRATCH0 Write/Read ---
[373950000] i2c_write_byte: data=0xa0, sda_bus=1, ack=0
   ERROR: No ACK on address
[396450000] i2c_write_byte: data=0x05, sda_bus=1, ack=0
    ERROR: No ACK on reg address
[418950000] i2c_write_byte: data=0x55, sda_bus=1, ack=0
    ERROR: No ACK on data
[448325000] i2c_write_byte: data=0xa0, sda_bus=1, ack=0
    ERROR: No ACK on address
[470825000] i2c_write_byte: data=0x05, sda_bus=1, ack=0
    ERROR: No ACK on reg address
[495825000] i2c_write_byte: data=0xa1, sda_bus=1, ack=0
    ERROR: No ACK on read address
[498325000] i2c_read_byte: bit[7]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[500825000] i2c_read_byte: bit[6]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[503325000] i2c_read_byte: bit[5]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[505825000] i2c_read_byte: bit[4]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[508325000] i2c_read_byte: bit[3]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[510825000] i2c_read_byte: bit[2]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[513325000] i2c_read_byte: bit[1]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[515825000] i2c_read_byte: bit[0]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[523950000] I2C Read: Reg[0x05] = 0xff
  FAIL: SCRATCH0 = 0xff (expected 0x55)
[547700000] i2c_write_byte: data=0xa0, sda_bus=1, ack=0
   ERROR: No ACK on address
[570200000] i2c_write_byte: data=0x05, sda_bus=1, ack=0
    ERROR: No ACK on reg address
[592700000] i2c_write_byte: data=0xaa, sda_bus=1, ack=0
    ERROR: No ACK on data
[622075000] i2c_write_byte: data=0xa0, sda_bus=1, ack=0
    ERROR: No ACK on address
[644575000] i2c_write_byte: data=0x05, sda_bus=1, ack=0
    ERROR: No ACK on reg address
[669575000] i2c_write_byte: data=0xa1, sda_bus=1, ack=0
    ERROR: No ACK on read address
[672075000] i2c_read_byte: bit[7]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[674575000] i2c_read_byte: bit[6]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[677075000] i2c_read_byte: bit[5]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[679575000] i2c_read_byte: bit[4]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[682075000] i2c_read_byte: bit[3]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[684575000] i2c_read_byte: bit[2]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[687075000] i2c_read_byte: bit[1]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[689575000] i2c_read_byte: bit[0]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[697700000] I2C Read: Reg[0x05] = 0xff
  FAIL: SCRATCH0 = 0xff (expected 0xaa)

--- Test 4: SCRATCH1 Write/Read ---
[721450000] i2c_write_byte: data=0xa0, sda_bus=1, ack=0
   ERROR: No ACK on address
[743950000] i2c_write_byte: data=0x06, sda_bus=1, ack=0
    ERROR: No ACK on reg address
[766450000] i2c_write_byte: data=0x12, sda_bus=1, ack=0
    ERROR: No ACK on data
[795825000] i2c_write_byte: data=0xa0, sda_bus=1, ack=0
    ERROR: No ACK on address
[818325000] i2c_write_byte: data=0x06, sda_bus=1, ack=0
    ERROR: No ACK on reg address
[843325000] i2c_write_byte: data=0xa1, sda_bus=1, ack=0
    ERROR: No ACK on read address
[845825000] i2c_read_byte: bit[7]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[848325000] i2c_read_byte: bit[6]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[850825000] i2c_read_byte: bit[5]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[853325000] i2c_read_byte: bit[4]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[855825000] i2c_read_byte: bit[3]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[858325000] i2c_read_byte: bit[2]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[860825000] i2c_read_byte: bit[1]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[863325000] i2c_read_byte: bit[0]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[871450000] I2C Read: Reg[0x06] = 0xff
  FAIL: SCRATCH1 = 0xff (expected 0x12)

--- Test 5: Read LINK_CAPS ---
[895200000] i2c_write_byte: data=0xa0, sda_bus=1, ack=0
    ERROR: No ACK on address
[917700000] i2c_write_byte: data=0x10, sda_bus=1, ack=0
    ERROR: No ACK on reg address
[942700000] i2c_write_byte: data=0xa1, sda_bus=1, ack=0
    ERROR: No ACK on read address
[945200000] i2c_read_byte: bit[7]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[947700000] i2c_read_byte: bit[6]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[950200000] i2c_read_byte: bit[5]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[952700000] i2c_read_byte: bit[4]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[955200000] i2c_read_byte: bit[3]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[957700000] i2c_read_byte: bit[2]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[960200000] i2c_read_byte: bit[1]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[962700000] i2c_read_byte: bit[0]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[970825000] I2C Read: Reg[0x10] = 0xff
  FAIL: LINK_CAPS = 0xff (expected 0x15)

--- Test 6: LED Control ---
[994575000] i2c_write_byte: data=0xa0, sda_bus=1, ack=0
   ERROR: No ACK on address
[1017075000] i2c_write_byte: data=0x20, sda_bus=1, ack=0
    ERROR: No ACK on reg address
[1039575000] i2c_write_byte: data=0xf0, sda_bus=1, ack=0
    ERROR: No ACK on data
  FAIL: LED_OUT hardware = 0x00 (expected 0xf0)
[1069050000] i2c_write_byte: data=0xa0, sda_bus=1, ack=0
    ERROR: No ACK on address
[1091550000] i2c_write_byte: data=0x20, sda_bus=1, ack=0
    ERROR: No ACK on reg address
[1116550000] i2c_write_byte: data=0xa1, sda_bus=1, ack=0
    ERROR: No ACK on read address
[1119050000] i2c_read_byte: bit[7]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1121550000] i2c_read_byte: bit[6]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1124050000] i2c_read_byte: bit[5]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1126550000] i2c_read_byte: bit[4]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1129050000] i2c_read_byte: bit[3]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1131550000] i2c_read_byte: bit[2]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1134050000] i2c_read_byte: bit[1]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1136550000] i2c_read_byte: bit[0]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1144675000] I2C Read: Reg[0x20] = 0xff
  FAIL: LED_OUT register = 0xff (expected 0xf0)

--- Test 7: Read Switches ---
[1168525000] i2c_write_byte: data=0xa0, sda_bus=1, ack=0
    ERROR: No ACK on address
[1191025000] i2c_write_byte: data=0x22, sda_bus=1, ack=0
    ERROR: No ACK on reg address
[1216025000] i2c_write_byte: data=0xa1, sda_bus=1, ack=0
    ERROR: No ACK on read address
[1218525000] i2c_read_byte: bit[7]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1221025000] i2c_read_byte: bit[6]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1223525000] i2c_read_byte: bit[5]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1226025000] i2c_read_byte: bit[4]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1228525000] i2c_read_byte: bit[3]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1231025000] i2c_read_byte: bit[2]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1233525000] i2c_read_byte: bit[1]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1236025000] i2c_read_byte: bit[0]=1, sda_bus=1, sda_slave=1, sda_slave_oe=0
[1244150000] I2C Read: Reg[0x22] = 0xff
  FAIL: SW_IN = 0xff (expected 0x3c)

--- Test 8: Wrong Slave Address ---
[1267900000] i2c_write_byte: data=0xa2, sda_bus=1, ack=0
  PASS: No ACK for wrong address

========================================
  Test Results: 2 PASS, 10 FAIL
========================================
  SOME TESTS FAILED!

